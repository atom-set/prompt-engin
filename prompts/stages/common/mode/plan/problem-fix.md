# 问题修复场景的特殊处理

> **文件说明**：本文件包含问题修复场景的特殊处理规则
> **规则来源**：rules/stages/common/mode/plan/problem-fix.md

---

当用户报告问题需要修复时，应遵循以下顺序：

1. **第一步：问题定位**（Plan 模式）
   - 添加调试代码（临时性，用于定位问题）
   - 运行调试代码，收集问题信息
   - 分析问题根本原因
   - 输出问题定位结果

2. **第二步：输出修复方案**（Plan 模式）
   - 基于定位结果，输出详细的修复方案
   - 说明修复的原因和影响范围
   - 输出实施计划（任务清单）
   - 等待用户确认

3. **第三步：执行修复**（Act 模式）
   - 用户输入"Act"后，执行修复
   - 清理临时调试代码
   - 验证修复效果

**重要原则**：
- ✅ 必须先定位问题，再输出方案
- ✅ 定位和方案输出都在 Plan 模式下完成
- ✅ 只有用户输入"Act"后才能执行修复
- ❌ 禁止跳过定位直接修复（除非属于明确的例外情况）
- ❌ 禁止在未定位问题的情况下添加防御性代码

**例外情况**：
- 明显的语法错误（如拼写错误、缺少括号等）
- 已知的简单问题（如配置项名称错误、路径错误等，且修复不超过 5 行代码）
- 紧急修复（Hotfix）：生产环境紧急问题，需要快速修复（修复后必须补充定位和验证）
- 重复出现的问题：之前已经定位过相同的问题，有明确的修复方案

