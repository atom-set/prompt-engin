# 禁止行为清单

> **文件说明**：本文件统一列出所有禁止的行为，避免规则分散和重复
> **规则来源**：rules/stages/common/mode/plan/forbidden-behaviors.md

---

**核心原则**：本清单统一列出所有禁止的行为，避免规则分散和重复。

- **Plan 模式禁止的行为**：
  1. ❌ **创建TODO后立即执行代码修改**
     - 即使创建了TODO列表，也不能立即执行代码修改
     - 必须等待用户输入"Act"指令后才能执行
  2. ❌ **假设用户同意执行（即使创建了TODO）**
     - 不能假设用户同意执行，必须明确等待用户输入"Act"
  3. ❌ **跳过"Act"指令直接执行修改**
     - 只有用户明确输入"Act"指令才能切换到执行模式
  4. ❌ **在Plan模式下调用文件修改工具**
     - 禁止调用 search_replace、write、delete_file、edit_notebook 等文件修改工具
     - 禁止运行可能改变代码库的命令
  5. ❌ **将问题描述误判为纯询问，直接执行修改**
     - 必须先确认用户意图，再决定是否输出方案
  6. ❌ **假设用户描述问题就是要求修改，跳过方案输出**
     - 必须先输出方案，等待用户确认后才能执行
  7. ❌ **在未明确用户意图时，直接执行代码修改**
     - 如果用户意图不明确，必须先询问确认
  8. ❌ **未输出方案就调用工具（即使工具本身是允许的）**
     - 如果用户有修改需求，必须先输出方案，才能调用任何工具
     - 即使工具本身是允许的（如 read_file），如果涉及修改需求，也必须先输出方案
     - 禁止在未输出方案的情况下，直接调用工具执行修改操作
  9. ❌ **跨响应调用修改工具（未等待"Act"指令）**
     - 如果先调用了只读工具，必须在同一响应中输出完整方案，不能跨响应直接调用修改工具
     - 如果输出了方案，必须等待用户明确输入"Act"后才能调用工具，不能在下一个响应中直接调用工具
  10. ❌ **跳过检查步骤直接调用工具**
     - 禁止在未显式输出检查结果的情况下调用工具
     - 禁止假设检查已执行，必须显式输出检查结果

- **Act 模式禁止的行为**：
  1. ❌ **在Act模式下但方案不完整时执行修改**
     - 如果方案不完整，必须停止执行并返回 Plan 模式补充方案
  2. ❌ **跳过方案输出直接调用文件修改工具**
     - 必须先输出完整方案，才能执行修改
  3. ❌ **继续执行，忽略发现的问题**
     - 如果执行过程中发现方案有问题，必须立即停止
  4. ❌ **不说明问题，直接修正**
     - 必须明确说明发现的问题和修正方案
  5. ❌ **不返回 Plan 模式，在 Act 模式下直接修正方案**
     - 如果方案有问题，必须返回 Plan 模式输出修正方案

- **通用禁止行为**：
  1. ❌ **收到修改需求后直接执行代码修改**
     - 必须先输出方案，等待用户确认
  2. ❌ **收到问题描述（可能涉及代码修改）后直接执行代码修改**
     - 必须先确认用户意图，再决定是否输出方案
  3. ❌ **只输出简单计划就执行修改**
     - 必须输出完整的5部分方案（需求分析、修改方案、影响分析、实施计划、风险评估）
  4. ❌ **假设用户同意执行（即使输出了方案）**
     - 必须等待用户明确输入"Act"指令
  5. ❌ **跳过方案输出直接执行修改**
     - 必须先输出方案，才能执行修改
  6. ❌ **假设用户意图，直接执行修改**
     - 如果用户意图不明确，必须先询问确认
  7. ❌ **跳过确认，直接输出方案**
     - 如果用户意图不明确，必须先确认再输出方案
  8. ❌ **使用模糊表述询问用户**
     - 必须使用清晰、明确的问题表述
  9. ❌ **在用户未明确回复时，继续执行修改**
     - 必须等待用户明确回复后再继续
  10. ❌ **跨响应调用修改工具（未等待"Act"指令）**
     - 如果输出了方案，必须等待用户明确输入"Act"后才能调用工具，不能在下一个响应中直接调用工具
  11. ❌ **跳过检查步骤直接调用工具**
     - 禁止在未显式输出检查结果的情况下调用工具
     - 禁止假设检查已执行，必须显式输出检查结果

